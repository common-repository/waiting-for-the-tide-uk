

// Characters to encode.
$encodings: (
  ('<', '%3C'),
  ('>', '%3E'),
  ('#', '%23'),
  ('"', '%22')
);

// Replaces $search in $string with $replace.
@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);
  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }
  @return $string;
}

// Returns background-image property value for icon.
@function get-icon($content, $viewBox, $fill) {
  $svg: '<svg fill="#{$fill}" viewBox="' + $viewBox + '" xmlns="http://www.w3.org/2000/svg">' + $content + '</svg>';
  @each $char, $encoded in $encodings {
    $svg: str-replace($svg, $char, $encoded);
  }
  @return url('data:image/svg+xml;charset=utf-8,' + $svg);
}

// Function to generate the tide icon.
@function get-icon-waves($fill) {
    $content: '<path d="M.954,2.913a.925.925,0,0,0,.506-.166l.011.013c.026-.028.05-.045.075-.071a.848.848,0,0,0,.122-.115,1.367,1.367,0,0,1,1.171-.488,1.128,1.128,0,0,1,.479.237,5.212,5.212,0,0,1,.508.5,6.048,6.048,0,0,0,.724.7,2.076,2.076,0,0,0,.848.378,3.412,3.412,0,0,0,3.046-1.2v0q.755-.808,1.369-.672a1.128,1.128,0,0,1,.479.237,5.345,5.345,0,0,1,.506.5,6.049,6.049,0,0,0,.726.7,2.023,2.023,0,0,0,.848.378A3.357,3.357,0,0,0,15.34,2.73l.01.011q.753-.808,1.368-.672a1.112,1.112,0,0,1,.479.237,5.063,5.063,0,0,1,.506.5,6.249,6.249,0,0,0,.726.7,2.059,2.059,0,0,0,.848.38,3.42,3.42,0,0,0,3.055-1.2l-.006-.007a.935.935,0,0,0,.347-.72.953.953,0,0,0-.954-.954.937.937,0,0,0-.6.228h0a.956.956,0,0,0-.111.1,1.441,1.441,0,0,1-1.257.568,1.1,1.1,0,0,1-.479-.237,5.221,5.221,0,0,1-.506-.5,6.243,6.243,0,0,0-.726-.7,2.05,2.05,0,0,0-.848-.38,3.358,3.358,0,0,0-2.966,1.133l-.01-.013q-.755.81-1.368.673a1.112,1.112,0,0,1-.479-.237,5.057,5.057,0,0,1-.508-.5,6.127,6.127,0,0,0-.724-.7,2.067,2.067,0,0,0-.848-.38,3.411,3.411,0,0,0-3.046,1.2v0c-.5.54-.96.763-1.369.672a1.1,1.1,0,0,1-.479-.235,5.39,5.39,0,0,1-.506-.5,6.268,6.268,0,0,0-.726-.7A2.049,2.049,0,0,0,3.314.1,3.372,3.372,0,0,0,.322,1.256C.3,1.27.286,1.282.271,1.3l-.011.01,0,0a.949.949,0,0,0,.692,1.6" transform="translate(0 0)" />' +
              '<path d="M21.719,4.3a.94.94,0,0,0-.6.228.968.968,0,0,0-.111.1,1.44,1.44,0,0,1-1.257.567,1.1,1.1,0,0,1-.479-.237,5.182,5.182,0,0,1-.506-.5,6.383,6.383,0,0,0-.726-.7,2.057,2.057,0,0,0-.848-.378,3.356,3.356,0,0,0-2.966,1.131l-.01-.011q-.755.808-1.368.672a1.11,1.11,0,0,1-.481-.237,5.182,5.182,0,0,1-.506-.5,6.267,6.267,0,0,0-.724-.7,2.048,2.048,0,0,0-.848-.378,3.406,3.406,0,0,0-3.046,1.2l0,0q-.755.81-1.368.673a1.112,1.112,0,0,1-.479-.237,5.221,5.221,0,0,1-.506-.5,6.238,6.238,0,0,0-.726-.7,2.059,2.059,0,0,0-.848-.38A3.376,3.376,0,0,0,.322,4.552c-.017.016-.037.026-.051.041L.258,4.6l0,0a.95.95,0,0,0,.693,1.6.925.925,0,0,0,.506-.166l.011.013c.026-.027.05-.044.074-.069a.873.873,0,0,0,.123-.116,1.361,1.361,0,0,1,1.171-.486,1.112,1.112,0,0,1,.479.237,5.182,5.182,0,0,1,.506.5,6.157,6.157,0,0,0,.726.7A2.031,2.031,0,0,0,5.4,7.2a3.4,3.4,0,0,0,3.045-1.2l0,0c.5-.54.96-.764,1.368-.673a1.112,1.112,0,0,1,.479.237,5.212,5.212,0,0,1,.508.5,6.132,6.132,0,0,0,.724.7,2.059,2.059,0,0,0,.848.38,3.36,3.36,0,0,0,2.966-1.133l.011.013q.753-.808,1.368-.673A1.128,1.128,0,0,1,17.2,5.6a5.387,5.387,0,0,1,.506.5,6.021,6.021,0,0,0,.726.7,2.05,2.05,0,0,0,.848.38,3.416,3.416,0,0,0,3.055-1.2l-.006-.006a.94.94,0,0,0,.347-.722.953.953,0,0,0-.954-.954" transform="translate(0 1.377)" />' +
              '<path d="M21.719,7.6a.934.934,0,0,0-.6.228h0a.847.847,0,0,0-.111.1,1.44,1.44,0,0,1-1.257.567,1.1,1.1,0,0,1-.479-.237,5.182,5.182,0,0,1-.506-.5,6.383,6.383,0,0,0-.726-.7,2.057,2.057,0,0,0-.848-.378,3.356,3.356,0,0,0-2.966,1.131l-.01-.011q-.755.808-1.368.672a1.11,1.11,0,0,1-.481-.237,5.182,5.182,0,0,1-.506-.5,6.268,6.268,0,0,0-.724-.7,2.048,2.048,0,0,0-.848-.378,3.406,3.406,0,0,0-3.046,1.2l0,0q-.755.81-1.368.673a1.112,1.112,0,0,1-.479-.237,5.221,5.221,0,0,1-.506-.5,6.238,6.238,0,0,0-.726-.7,2.059,2.059,0,0,0-.848-.38A3.38,3.38,0,0,0,.32,7.848c-.016.016-.035.026-.05.041L.258,7.9l0,0A.95.95,0,0,0,.954,9.5a.925.925,0,0,0,.506-.166l.011.013c.026-.027.05-.044.074-.069a.873.873,0,0,0,.123-.116A1.361,1.361,0,0,1,2.839,8.68a1.112,1.112,0,0,1,.479.237,5.182,5.182,0,0,1,.506.5,6.157,6.157,0,0,0,.726.7A2.031,2.031,0,0,0,5.4,10.5,3.4,3.4,0,0,0,8.443,9.3l0,0c.5-.54.96-.764,1.368-.673a1.112,1.112,0,0,1,.479.237,5.212,5.212,0,0,1,.508.5,6.132,6.132,0,0,0,.724.7,2.059,2.059,0,0,0,.848.38,3.36,3.36,0,0,0,2.966-1.133l.011.013q.753-.808,1.368-.673A1.128,1.128,0,0,1,17.2,8.9a5.387,5.387,0,0,1,.506.5,6.021,6.021,0,0,0,.726.7,2.05,2.05,0,0,0,.848.38,3.416,3.416,0,0,0,3.055-1.2l-.006-.006a.94.94,0,0,0,.347-.722.953.953,0,0,0-.954-.954" transform="translate(0 2.753)" />';
    @return get-icon($content, '0 0 22.675 13.308', $fill);
}


@function get-icon-high($fill) {
    $content: '<path d="M 15.374 10.478 C 15.219 10.481 15.071 10.537 14.954 10.638 C 14.926 10.66 14.9 10.685 14.877 10.711 C 14.671 10.986 14.339 11.136 13.997 11.111 C 13.873 11.084 13.758 11.027 13.662 10.945 C 13.536 10.836 13.417 10.718 13.308 10.593 C 13.152 10.416 12.982 10.252 12.8 10.102 C 12.624 9.97 12.421 9.879 12.206 9.837 C 11.425 9.737 10.645 10.034 10.13 10.629 L 10.122 10.618 C 9.769 10.995 9.45 11.152 9.164 11.088 C 9.04 11.061 8.924 11.004 8.828 10.922 C 8.702 10.813 8.583 10.695 8.474 10.57 C 8.318 10.393 8.149 10.228 7.967 10.078 C 7.792 9.945 7.588 9.855 7.373 9.813 C 6.565 9.71 5.761 10.026 5.24 10.651 C 4.887 11.029 4.568 11.186 4.282 11.122 C 4.158 11.095 4.043 11.038 3.947 10.956 C 3.821 10.847 3.702 10.729 3.593 10.603 C 3.437 10.426 3.267 10.263 3.085 10.113 C 2.91 9.98 2.706 9.889 2.491 9.847 C 1.699 9.745 0.909 10.049 0.391 10.655 C 0.38 10.664 0.367 10.671 0.357 10.678 L 0.348 10.685 C -0.01 11.052 0.164 11.668 0.66 11.794 C 0.717 11.808 0.776 11.815 0.835 11.814 C 0.961 11.811 1.085 11.771 1.189 11.698 L 1.197 11.707 C 1.215 11.688 1.232 11.676 1.249 11.658 C 1.28 11.634 1.309 11.608 1.335 11.578 C 1.535 11.337 1.842 11.21 2.155 11.238 C 2.278 11.265 2.393 11.322 2.49 11.404 C 2.616 11.513 2.734 11.631 2.844 11.756 C 2.999 11.933 3.169 12.098 3.352 12.247 C 3.527 12.38 3.73 12.471 3.946 12.512 C 4.753 12.615 5.557 12.298 6.078 11.673 C 6.429 11.295 6.75 11.138 7.036 11.202 C 7.159 11.229 7.274 11.286 7.371 11.368 C 7.497 11.478 7.616 11.596 7.726 11.721 C 7.881 11.898 8.051 12.062 8.233 12.211 C 8.409 12.345 8.613 12.436 8.83 12.478 C 9.611 12.578 10.39 12.28 10.906 11.685 L 10.914 11.694 C 11.265 11.317 11.584 11.16 11.872 11.223 C 11.995 11.251 12.11 11.308 12.207 11.389 C 12.332 11.499 12.451 11.617 12.561 11.742 C 12.716 11.919 12.886 12.083 13.069 12.232 C 13.244 12.365 13.447 12.456 13.663 12.498 C 14.473 12.6 15.28 12.282 15.802 11.654 C 15.954 11.53 16.043 11.345 16.045 11.149 C 16.046 10.778 15.745 10.476 15.374 10.478" style=""/>' +
    '<path d="M 12.043 3.126 L 12.523 2.767 C 12.723 2.617 12.723 2.373 12.523 2.223 L 8.331 -0.911 C 8.129 -1.065 7.802 -1.065 7.6 -0.911 L 3.405 2.221 C 3.201 2.373 3.201 2.617 3.405 2.767 L 3.884 3.126 C 4.089 3.28 4.421 3.275 4.623 3.12 L 7.101 1.177 L 7.101 5.811 C 7.099 6.025 7.331 6.198 7.619 6.198 L 8.309 6.198 C 8.595 6.198 8.828 6.025 8.828 5.811 L 8.828 1.177 L 11.303 3.12 C 11.503 3.279 11.839 3.28 12.043 3.126 Z" style="paint-order: fill; stroke-width: 0px;"/>' +
    '<path d="M 15.482 7.66 C 15.327 7.663 15.179 7.719 15.062 7.82 C 15.034 7.842 15.008 7.867 14.985 7.893 C 14.779 8.168 14.447 8.318 14.105 8.293 C 13.981 8.266 13.866 8.209 13.77 8.127 C 13.644 8.018 13.525 7.9 13.416 7.775 C 13.26 7.598 13.09 7.434 12.908 7.284 C 12.732 7.152 12.529 7.061 12.314 7.019 C 11.533 6.919 10.753 7.216 10.238 7.811 L 10.23 7.8 C 9.877 8.177 9.558 8.334 9.272 8.27 C 9.148 8.243 9.032 8.186 8.936 8.104 C 8.81 7.995 8.691 7.877 8.582 7.752 C 8.426 7.575 8.257 7.41 8.075 7.26 C 7.9 7.127 7.696 7.037 7.481 6.995 C 6.673 6.892 5.869 7.208 5.348 7.833 C 4.995 8.211 4.676 8.368 4.39 8.304 C 4.266 8.277 4.151 8.22 4.055 8.138 C 3.929 8.029 3.81 7.911 3.701 7.785 C 3.545 7.608 3.375 7.445 3.193 7.295 C 3.018 7.162 2.814 7.071 2.599 7.029 C 1.807 6.927 1.017 7.231 0.499 7.837 C 0.488 7.846 0.475 7.853 0.465 7.86 L 0.456 7.867 C 0.098 8.234 0.272 8.85 0.768 8.976 C 0.825 8.99 0.884 8.997 0.943 8.996 C 1.069 8.993 1.193 8.953 1.297 8.88 L 1.305 8.889 C 1.323 8.87 1.34 8.858 1.357 8.84 C 1.388 8.816 1.417 8.79 1.443 8.76 C 1.643 8.519 1.95 8.392 2.263 8.42 C 2.386 8.447 2.501 8.504 2.598 8.586 C 2.724 8.695 2.842 8.813 2.952 8.938 C 3.107 9.115 3.277 9.28 3.46 9.429 C 3.635 9.562 3.838 9.653 4.054 9.694 C 4.861 9.797 5.665 9.48 6.186 8.855 C 6.537 8.477 6.858 8.32 7.144 8.384 C 7.267 8.411 7.382 8.468 7.479 8.55 C 7.605 8.66 7.724 8.778 7.834 8.903 C 7.989 9.08 8.159 9.244 8.341 9.393 C 8.517 9.527 8.721 9.618 8.938 9.66 C 9.719 9.76 10.498 9.462 11.014 8.867 L 11.022 8.876 C 11.373 8.499 11.692 8.342 11.98 8.405 C 12.103 8.433 12.218 8.49 12.315 8.571 C 12.44 8.681 12.559 8.799 12.669 8.924 C 12.824 9.101 12.994 9.265 13.177 9.414 C 13.352 9.547 13.555 9.638 13.771 9.68 C 14.581 9.782 15.388 9.464 15.91 8.836 C 16.062 8.712 16.151 8.527 16.153 8.331 C 16.154 7.96 15.853 7.658 15.482 7.66"/>';
    @return get-icon($content, '-0.314 -1.373 16.942 14.314', $fill);
}

@function get-icon-low($fill) {
    $content: '<path d="M 15.374 10.478 C 15.219 10.481 15.071 10.537 14.954 10.638 C 14.926 10.66 14.9 10.685 14.877 10.711 C 14.671 10.986 14.339 11.136 13.997 11.111 C 13.873 11.084 13.758 11.027 13.662 10.945 C 13.536 10.836 13.417 10.718 13.308 10.593 C 13.152 10.416 12.982 10.252 12.8 10.102 C 12.624 9.97 12.421 9.879 12.206 9.837 C 11.425 9.737 10.645 10.034 10.13 10.629 L 10.122 10.618 C 9.769 10.995 9.45 11.152 9.164 11.088 C 9.04 11.061 8.924 11.004 8.828 10.922 C 8.702 10.813 8.583 10.695 8.474 10.57 C 8.318 10.393 8.149 10.228 7.967 10.078 C 7.792 9.945 7.588 9.855 7.373 9.813 C 6.565 9.71 5.761 10.026 5.24 10.651 C 4.887 11.029 4.568 11.186 4.282 11.122 C 4.158 11.095 4.043 11.038 3.947 10.956 C 3.821 10.847 3.702 10.729 3.593 10.603 C 3.437 10.426 3.267 10.263 3.085 10.113 C 2.91 9.98 2.706 9.889 2.491 9.847 C 1.699 9.745 0.909 10.049 0.391 10.655 C 0.38 10.664 0.367 10.671 0.357 10.678 L 0.348 10.685 C -0.01 11.052 0.164 11.668 0.66 11.794 C 0.717 11.808 0.776 11.815 0.835 11.814 C 0.961 11.811 1.085 11.771 1.189 11.698 L 1.197 11.707 C 1.215 11.688 1.232 11.676 1.249 11.658 C 1.28 11.634 1.309 11.608 1.335 11.578 C 1.535 11.337 1.842 11.21 2.155 11.238 C 2.278 11.265 2.393 11.322 2.49 11.404 C 2.616 11.513 2.734 11.631 2.844 11.756 C 2.999 11.933 3.169 12.098 3.352 12.247 C 3.527 12.38 3.73 12.471 3.946 12.512 C 4.753 12.615 5.557 12.298 6.078 11.673 C 6.429 11.295 6.75 11.138 7.036 11.202 C 7.159 11.229 7.274 11.286 7.371 11.368 C 7.497 11.478 7.616 11.596 7.726 11.721 C 7.881 11.898 8.051 12.062 8.233 12.211 C 8.409 12.345 8.613 12.436 8.83 12.478 C 9.611 12.578 10.39 12.28 10.906 11.685 L 10.914 11.694 C 11.265 11.317 11.584 11.16 11.872 11.223 C 11.995 11.251 12.11 11.308 12.207 11.389 C 12.332 11.499 12.451 11.617 12.561 11.742 C 12.716 11.919 12.886 12.083 13.069 12.232 C 13.244 12.365 13.447 12.456 13.663 12.498 C 14.473 12.6 15.28 12.282 15.802 11.654 C 15.954 11.53 16.043 11.345 16.045 11.149 C 16.046 10.778 15.745 10.476 15.374 10.478" style=""/>' +
    '<path d="M 12.043 3.126 L 12.523 2.767 C 12.723 2.617 12.723 2.373 12.523 2.223 L 8.331 -0.911 C 8.129 -1.065 7.802 -1.065 7.6 -0.911 L 3.405 2.221 C 3.201 2.373 3.201 2.617 3.405 2.767 L 3.884 3.126 C 4.089 3.28 4.421 3.275 4.623 3.12 L 7.101 1.177 L 7.101 5.811 C 7.099 6.025 7.331 6.198 7.619 6.198 L 8.309 6.198 C 8.595 6.198 8.828 6.025 8.828 5.811 L 8.828 1.177 L 11.303 3.12 C 11.503 3.279 11.839 3.28 12.043 3.126 Z" style="paint-order: fill; stroke-width: 0px;" transform="matrix(-1, 0, 0, -1, 15.924999, 5.1715)"/>' +
    '<path d="M 15.482 7.66 C 15.327 7.663 15.179 7.719 15.062 7.82 C 15.034 7.842 15.008 7.867 14.985 7.893 C 14.779 8.168 14.447 8.318 14.105 8.293 C 13.981 8.266 13.866 8.209 13.77 8.127 C 13.644 8.018 13.525 7.9 13.416 7.775 C 13.26 7.598 13.09 7.434 12.908 7.284 C 12.732 7.152 12.529 7.061 12.314 7.019 C 11.533 6.919 10.753 7.216 10.238 7.811 L 10.23 7.8 C 9.877 8.177 9.558 8.334 9.272 8.27 C 9.148 8.243 9.032 8.186 8.936 8.104 C 8.81 7.995 8.691 7.877 8.582 7.752 C 8.426 7.575 8.257 7.41 8.075 7.26 C 7.9 7.127 7.696 7.037 7.481 6.995 C 6.673 6.892 5.869 7.208 5.348 7.833 C 4.995 8.211 4.676 8.368 4.39 8.304 C 4.266 8.277 4.151 8.22 4.055 8.138 C 3.929 8.029 3.81 7.911 3.701 7.785 C 3.545 7.608 3.375 7.445 3.193 7.295 C 3.018 7.162 2.814 7.071 2.599 7.029 C 1.807 6.927 1.017 7.231 0.499 7.837 C 0.488 7.846 0.475 7.853 0.465 7.86 L 0.456 7.867 C 0.098 8.234 0.272 8.85 0.768 8.976 C 0.825 8.99 0.884 8.997 0.943 8.996 C 1.069 8.993 1.193 8.953 1.297 8.88 L 1.305 8.889 C 1.323 8.87 1.34 8.858 1.357 8.84 C 1.388 8.816 1.417 8.79 1.443 8.76 C 1.643 8.519 1.95 8.392 2.263 8.42 C 2.386 8.447 2.501 8.504 2.598 8.586 C 2.724 8.695 2.842 8.813 2.952 8.938 C 3.107 9.115 3.277 9.28 3.46 9.429 C 3.635 9.562 3.838 9.653 4.054 9.694 C 4.861 9.797 5.665 9.48 6.186 8.855 C 6.537 8.477 6.858 8.32 7.144 8.384 C 7.267 8.411 7.382 8.468 7.479 8.55 C 7.605 8.66 7.724 8.778 7.834 8.903 C 7.989 9.08 8.159 9.244 8.341 9.393 C 8.517 9.527 8.721 9.618 8.938 9.66 C 9.719 9.76 10.498 9.462 11.014 8.867 L 11.022 8.876 C 11.373 8.499 11.692 8.342 11.98 8.405 C 12.103 8.433 12.218 8.49 12.315 8.571 C 12.44 8.681 12.559 8.799 12.669 8.924 C 12.824 9.101 12.994 9.265 13.177 9.414 C 13.352 9.547 13.555 9.638 13.771 9.68 C 14.581 9.782 15.388 9.464 15.91 8.836 C 16.062 8.712 16.151 8.527 16.153 8.331 C 16.154 7.96 15.853 7.658 15.482 7.66"/>';
    @return get-icon($content, '-0.314 -1.373 16.942 14.314', $fill);
}

@function get-icon-marker($fill) {
    $content: '<path d="M12 0c-4.198 0-8 3.403-8 7.602 0 4.198 3.469 9.21 8 16.398 4.531-7.188 8-12.2 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"/>';
    @return get-icon($content, '0 0 24 24', $fill);
}

@function get-icon-calendar($fill) {
    $content: '<path d="M20 20h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm6 0h-4v4h4v-4zm-6-6h-4v4h4v-4zm16-8v22h-24v-22h3v1c0 1.103.897 2 2 2s2-.897 2-2v-1h10v1c0 1.103.897 2 2 2s2-.897 2-2v-1h3zm-2 6h-20v14h20v-14zm-2-7c0-.552-.447-1-1-1s-1 .448-1 1v2c0 .552.447 1 1 1s1-.448 1-1v-2zm-14 2c0 .552-.447 1-1 1s-1-.448-1-1v-2c0-.552.447-1 1-1s1 .448 1 1v2z"/>';
    @return get-icon($content, '0 0 24 24', $fill);
}


@mixin generate($name, $fill, $size : 1.3em, $valign : text-bottom) {
    $background : get-icon-waves($fill);
    @if $name == "waves" {
        $background : get-icon-waves($fill);
    } @else if $name == "high" {
        $background : get-icon-high($fill);
    } @else if $name == "low" {
        $background : get-icon-low($fill);
    } @else if $name == "marker" {
        $background : get-icon-marker($fill);
    } @else if $name == "calendar" {
        $background : get-icon-calendar($fill);
    }
    .icon-tide-#{$name} {
        display: inline-block;
        background-image: $background;
        background-repeat: no-repeat;
        background-position: center center;
        height: $size;
        width: $size;
        margin-right: 4px;
        vertical-align: $valign;
    }   
}

